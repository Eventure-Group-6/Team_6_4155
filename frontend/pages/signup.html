
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Eventure â€” Sign up</title>

  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="../assets/css/styles.css">
</head>
<body>
  <main class="app-card" role="main" aria-labelledby="signupTitle">
    <h1 id="signupTitle" class="h1">Create an account</h1>
    <p class="lead">Register with your college email so you can post as a club organizer.</p>

    <form id="signupForm" novalidate>
      <div class="form-group">
        <label for="fullname">Full name</label>
        <input id="fullname" name="fullname" type="text" class="input" placeholder="Jane Student" required />
      </div>

      <div class="form-group">
        <label for="signupEmail">College email</label>
        <input id="signupEmail" name="email" type="email" class="input" placeholder="name@charlotte.edu" required />
      </div>

      <div class="form-group">
        <label for="signupPassword">Password (min. 6 characters)</label>
        <input id="signupPassword" name="password" type="password" class="input" minlength="6" placeholder="Create a password" required />
      </div>

      <div style="display:flex;gap:10px;align-items:center;justify-content:space-between;margin-top:6px">
        <button type="submit" class="btn">Create account</button>
        <a class="link" href="login.html">Already have an account?</a>
      </div>
    </form>

    <div class="divider" role="separator" aria-hidden="true"></div>

    <p class="small">We will verify your college email before enabling posting privileges.</p>
  </main>

<script src="../assets/js/api.js"></script>
<script src="../assets/js/storage.js"></script>
<script>
  document.getElementById('signupForm').addEventListener('submit', async function(e){
    e.preventDefault();
    const email = document.getElementById('signupEmail').value.trim();
    const fullname = document.getElementById('fullname').value.trim();
    const pw = document.getElementById('signupPassword').value;
    if(!fullname || !email || pw.length < 6){ alert('Please complete the form correctly.'); return; }
    
    try {
      const data = await api.signup(fullname, email, pw);
      if(data.success) {
        alert('Account created successfully!');
        window.location.href = 'login.html';
      } else {
        alert(data.message || 'Signup failed');
      }
    } catch(error) {
      console.error('Backend offline, using demo mode');
      storage.set('demoUser', { fullname, email, password: pw });
      alert('Account created successfully! (Demo mode - backend offline)');
      window.location.href = 'login.html';
    }
  });
</script>
</body>
</html>
